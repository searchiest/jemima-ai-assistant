<!doctype html>
<html lang="en">
<head>
  <!-- Basic setup -->
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <title>Contact | Jemima AI</title>
  <meta name="description" content="Get in touch with Jemima AI. Email, phone, or book a free consultation. 24/7 coverage." />
  <link rel="canonical" href="https://jemima.ai/contact.html" />
  <meta name="robots" content="index, follow" />
  <meta name="author" content="jemima.ai" />

  <!-- Open Graph -->
  <meta property="og:type" content="article" />
  <meta property="og:url" content="https://jemima.ai/contact.html" />
  <meta property="og:title" content="Contact | Jemima AI" />
  <meta property="og:description" content="We'd love to hear from you and discuss your AI needs. Email, phone, or book a call." />
  <meta property="og:image" content="og-image.jpg" />

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:url" content="https://jemima.ai/contact.html" />
  <meta name="twitter:title" content="Contact | Jemima AI" />
  <meta name="twitter:description" content="Ask about solutions, integrations, or book a free consultation. 24/7 coverage." />
  <meta name="twitter:image" content="og-image.jpg" />

  <!-- Icons -->
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
  <link rel="manifest" href="/site.webmanifest" />
  <meta name="theme-color" content="#4f46e5" />

  <!-- Performance & Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet" />

  <!-- Tailwind CDN + Typography plugin -->
  <script src="https://cdn.tailwindcss.com?plugins=typography"></script>
  <script>
    tailwind.config = {
      theme: { extend: { borderRadius: { '2xl': '1rem' } } }
    }
  </script>

  <!-- Site styles -->
  <style>
    :root { --radius: 1rem; }
    html, body {
      font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI",
                   Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
    }
    .prose :where(h2,h3){ scroll-margin-top: 6rem; }
    .btn { display:inline-flex; align-items:center; justify-content:center; border-radius:.5rem; padding:.5rem 1rem; font-weight:600; }
  </style>

<style>
  :root { --cta-h: 76px; }

  @media (max-width: 640px){
    /* Layering order: chat popup > modals > footer */
    #chat-popup     { z-index: 9999 !important; }
    #bookcall-modal { z-index: 9998 !important; }
    #mobile-cta-bar { z-index: 9997 !important; }

    /* Chat popup: lift above sticky footer */
    #chat-popup > div.bottom-5{
      bottom: calc(env(safe-area-inset-bottom, 0px) + var(--cta-h) + 16px) !important;
      left: 1rem !important;
      right: 1rem !important;
    }

    /* Chat pill sits above footer when visible */
    #chat-launcher{
      position: fixed !important;
      z-index: 9996 !important;
      bottom: calc(env(safe-area-inset-bottom, 0px) + var(--cta-h) + 22px) !important;
      right: 1.25rem !important;
      transition: opacity .3s ease, transform .3s ease;
    }

    /* Hidden state when chat is open */
    #chat-launcher.hidden{
      opacity: 0;
      pointer-events: none;
      transform: translateY(20px);
    }

    /* Avoid overlap of footer with page content */
    body{
      padding-bottom: calc(env(safe-area-inset-bottom, 0px) + var(--cta-h));
    }
  }
</style>

<style>
  @media (max-width: 640px){
    /* When chat is open, hide the floating pill entirely */
    body.chat-open #chat-launcher{
      display: none !important;
    }
  }
</style>

  <!-- Icons / extra CSS -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" crossorigin="anonymous" />

  <!-- Your voice module (kept) -->
  <script type="module" crossorigin src="/voice/assets/index-dBvI1JZo.js"></script>

  <!-- Google Tag Manager -->
  <script>
    (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-5VBX6H2N');
  </script>
  <!-- End Google Tag Manager -->
</head>

<body class="bg-white text-gray-900">

<!-- Book a Call: Modal (kept) -->
<div id="bookcall-modal" class="fixed inset-0 z-[100] hidden" aria-hidden="true" inert>
  <div class="absolute inset-0 bg-black/50"></div>
  <div class="absolute inset-0 flex items-center justify-center px-4">
    <div role="dialog" aria-modal="true" aria-labelledby="bookcall-title"
         class="w-full max-w-lg rounded-2xl bg-white shadow-xl">
      <div class="flex items-center justify-between px-6 py-4 border-b">
        <h3 id="bookcall-title" class="text-lg font-semibold">Book Discovery Call</h3>
        <button type="button" class="p-2 rounded-md hover:bg-gray-100" data-close-modal aria-label="Close">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
            <path d="M6 6l12 12M18 6l-12 12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          </svg>
        </button>
      </div>
      <section class="form-section">
        <div class="px-6 py-5">
          <p class="mt-1 text-sm text-gray-600">Lets meet online to discuss AI automation for your business.</p>
          <!-- Booking form kept from your template -->
          <form class="booking-form mt-5" id="bookingForm" autocomplete="on">
            <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
              <div>
                <label for="firstName" class="block text-sm font-medium text-gray-700 mb-1">First name</label>
                <input id="firstName" name="firstName" type="text" autocomplete="given-name" placeholder="Jane" required
                       class="block w-full rounded-lg border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"/>
              </div>
              <div>
                <label for="lastName" class="block text-sm font-medium text-gray-700 mb-1">Last name</label>
                <input id="lastName" name="lastName" type="text" autocomplete="family-name" placeholder="Doe" required
                       class="block w-full rounded-lg border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"/>
              </div>
              <div class="sm:col-span-2">
                <label for="company" class="block text-sm font-medium text-gray-700 mb-1">Company</label>
                <input id="company" name="company" type="text" autocomplete="organization" placeholder="Your company"
                       class="block w-full rounded-lg border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"/>
              </div>
              <div>
                <label for="phone" class="block text-sm font-medium text-gray-700 mb-1">Telephone number</label>
                <input id="phone" name="phone" type="tel" autocomplete="tel" placeholder="01234567890"
                       class="block w-full rounded-lg border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"/>
              </div>
              <div>
                <label for="email" class="block text-sm font-medium text-gray-700 mb-1">Email address</label>
                <input id="email" name="email" type="email" autocomplete="email" placeholder="you@example.com" required
                       class="block w-full rounded-lg border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"/>
              </div>
              <div>
                <label for="day" class="block text-sm font-medium text-gray-700 mb-1">Choose a day</label>
                <input id="day" name="day" type="date" required
                       class="block w-full rounded-lg border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"/>
              </div>
              <div>
                <label for="slot" class="block text-sm font-medium text-gray-700 mb-1">Choose a time</label>
                <select id="slot" name="slot" required
                        class="block w-full rounded-lg border border-gray-300 px-3 py-2 text-sm bg-white focus:outline-none focus:ring-2 focus:ring-blue-500">
                  <option value="">Pick a day first</option>
                </select>
              </div>
            </div>

            <input type="hidden" id="pageUrl" name="pageUrl" value=""/>

            <div class="mt-5 flex items-center justify-end gap-3">
              <button type="button" data-close-modal
                      class="inline-flex items-center rounded-lg border border-gray-300 px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50">
                Cancel
              </button>
              <button type="submit"
                      class="inline-flex items-center rounded-lg bg-blue-600 px-4 py-2 text-sm font-semibold text-white hover:brightness-95">
                Book now
              </button>
            </div>

            <p id="formMsg" role="status" aria-live="polite"
               class="mt-3 hidden rounded-lg border px-3 py-2 text-sm"></p>
          </form>
        </div>
      </section>
    </div>
  </div>
</div>

<!-- Toggle logic for Book a Call modal -->
<script>
  (function () {
    const modal    = document.getElementById('bookcall-modal');
    const backdrop = modal.firstElementChild;

    window.openBookcall = function () {
      modal.classList.remove('hidden');
      modal.removeAttribute('inert');
      modal.setAttribute('aria-hidden', 'false');
      document.body.classList.add('overflow-hidden');
      const first = modal.querySelector('input, select, textarea, button');
      if (first) first.focus();
      document.addEventListener('keydown', onEsc);
    }

    window.closeBookcall = function () {
      modal.classList.add('hidden');
      modal.setAttribute('aria-hidden', 'true');
      modal.setAttribute('inert', '');
      document.body.classList.remove('overflow-hidden');
      document.removeEventListener('keydown', onEsc);
    }

    function onEsc(e){ if(e.key === 'Escape') window.closeBookcall(); }

    document.addEventListener('click', (e) => {
      const opener = e.target.closest('[data-modal="bookcall"]');
      if (opener) { e.preventDefault(); window.openBookcall(); }
    });

    backdrop.addEventListener('click', window.closeBookcall);
    modal.querySelectorAll('[data-close-modal]')
         .forEach(b => b.addEventListener('click', window.closeBookcall));

    modal.classList.add('hidden');
    modal.setAttribute('aria-hidden', 'true');
    modal.setAttribute('inert', '');
  })();
</script>

<!-- Top Contact Bar -->
<div class="hidden sm:block mt-2 bg-white text-blue-600 text-xs shadow-sm">
  <div class="max-w-6xl mx-auto px-6 py-1 flex items-center">
    <div class="flex items-center gap-4">
      <span class="inline-flex items-center gap-2">
        <i class="fas fa-phone-alt"></i>
        <b>SMS</b> +44 7479 277657
      </span>
      <span>
        <i class="fa-solid fa-envelope text-[14px] text-blue-600 align-middle"></i>
        jemima@jemima.ai
      </span>
      <!-- WhatsApp code slot -->
    </div>
  </div>
</div>

<!-- Header -->
<header class="bg-white/95 backdrop-blur border-b sticky top-0 z-50 pb-1">
  <div class="max-w-6xl mx-auto px-6 h-12 flex items-center">
    <a href="/" class="flex items-center gap-2 font-extrabold text-lg tracking-tight">
      <span class="text-gray-900">jemima.ai</span>
    </a>
    <nav class="ml-auto hidden sm:flex items-center gap-6">
      <a href="https://jemima.ai#capabilities" class="py-2 text-gray-700 hover:text-indigo-600">Solutions</a>
      <a href="https://jemima.ai#method" class="py-2 text-gray-700 hover:text-indigo-600">Methodology</a>
      <a href="https://jemima.ai#compare" class="py-2 text-gray-700 hover:text-indigo-600">Compare</a>
    </nav>
    <a href="#contact" data-modal="bookcall"
       class="ml-4 hidden sm:inline-flex items-center px-3 py-2 rounded-md bg-blue-600 text-white text-sm font-semibold hover:brightness-95">
      Book Discovery Call
    </a>
    <div class="ml-auto sm:hidden flex items-center gap-2">
      <button id="menuBtn" aria-label="Open menu" aria-controls="mobileNav" aria-expanded="false"
              class="inline-flex items-center justify-center w-10 h-10 rounded-md border border-gray-200 text-gray-700">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path stroke-linecap="round" stroke-width="2" d="M4 7h16M4 12h16M4 17h16"/></svg>
      </button>
    </div>
  </div>
<div id="mobileNav" class="sm:hidden hidden absolute top-full left-0 right-0 z-50 border-t bg-white shadow-lg">
  <nav class="px-6 py-3 flex flex-col">
    <a href="https://jemima.ai#capabilities" class="py-2 text-gray-700 hover:text-indigo-600">Solutions</a>
    <a href="https://jemima.ai#method" class="py-2 text-gray-700 hover:text-indigo-600">Methodology</a>
    <a href="https://jemima.ai#compare" class="py-2 text-gray-700 hover:text-indigo-600">Compare</a>

    <!-- Visible on mobile, full width -->
    <a href="#contact" data-modal="bookcall"
       class="mt-3 inline-flex w-full items-center justify-center rounded-md bg-blue-600 px-4 py-2 text-white text-sm font-semibold hover:brightness-95">
      Book Discovery Call
    </a>
  </nav>
</div>
</header>

<!-- Mobile menu toggle -->
<script>
  (function () {
    const btn = document.getElementById('menuBtn');
    const panel = document.getElementById('mobileNav');
    if (!btn || !panel) return;

    function closeMenu() {
      panel.classList.add('hidden');
      btn.setAttribute('aria-expanded', 'false');
      document.body.classList.remove('overflow-hidden');
    }
    function toggleMenu() {
      const willOpen = panel.classList.contains('hidden');
      panel.classList.toggle('hidden');
      btn.setAttribute('aria-expanded', String(willOpen));
      document.body.classList.toggle('overflow-hidden', willOpen);
    }

    btn.addEventListener('click', toggleMenu);
    panel.addEventListener('click', (e) => { if (e.target.closest('a')) closeMenu(); });
    document.addEventListener('keydown', (e) => { if (e.key === 'Escape') closeMenu(); });
  })();
</script>

<!-- Main Content -->
<main id="main" class="mx-auto max-w-6xl px-6 py-12">
  <!-- Breadcrumbs -->
  <nav aria-label="Breadcrumb" class="text-sm text-gray-500">
    <ol class="flex gap-2 flex-wrap">
      <li><a href="https://jemima.ai/" class="hover:text-gray-700">Jemima AI</a></li>
      <li>/</li>
      <li><span class="text-gray-800">Contact</span></li>
    </ol>
  </nav>

  <!-- H1 and intro -->
  <header class="mt-4 mb-10 text-center">
    <h1 class="text-3xl sm:text-4xl font-bold tracking-tight">Get in Touch</h1>
    <p class="mt-3 text-lg text-gray-600 max-w-3xl mx-auto">We'd love to hear from you and discuss your AI needs.</p>
    <div class="mt-4 text-sm text-gray-500">
      <span>Updated <time datetime="2025-10-27">27 Oct 2025</time></span>
    </div>
  </header>

  <!-- Contact-only body (no form) -->
  <section class="grid gap-8 md:grid-cols-5 items-start">
    <!-- Contact info -->
    <div class="md:col-span-3 rounded-2xl border border-gray-200 p-6 bg-white">
      <h2 class="text-xl font-semibold">Contact Jemima</h2>
      <p class="mt-2 text-gray-700">Have questions about our AI solutions? Ready to transform your business? Reach out and we’ll respond quickly.</p>

      <div class="mt-6 grid sm:grid-cols-2 gap-6">
        <div class="rounded-xl border border-gray-200 p-5">
          <h3 class="font-semibold">Email</h3>
          <p class="mt-2"><a class="underline" href="mailto:jemima@jemima.ai">jemima@jemima.ai</a></p>
        </div>
        <div class="rounded-xl border border-gray-200 p-5">
          <h3 class="font-semibold">Phone</h3>
          <p class="mt-2"><a class="underline" href="tel:+447479277657">+44 7479 277657</a></p>
        </div>
        <div class="rounded-xl border border-gray-200 p-5 sm:col-span-2">
          <h3 class="font-semibold">Office</h3>
          <p class="mt-2">71-75 Shelton Street<br/>London<br/>WC2H 9JQ</p>
        </div>
        <div class="rounded-xl border border-gray-200 p-5 sm:col-span-2">
          <h3 class="font-semibold">Business Hours</h3>
          <p class="mt-2">24 Hours Every Day</p>
        </div>
      </div>

      <div class="mt-6 flex flex-wrap gap-3">
        <a href="mailto:jemima@jemima.ai" class="btn bg-blue-600 text-white hover:brightness-95"><i class="fa-solid fa-envelope mr-2"></i>Email Us</a>
        <a href="tel:+447479277657" class="btn bg-white border border-gray-300 text-gray-900 hover:bg-gray-50"><i class="fa-solid fa-phone mr-2"></i>Call Us</a>
      </div>
    </div>

    <!-- CTA card -->
    <aside class="md:col-span-2 space-y-6">
      <div class="rounded-2xl border border-indigo-100 bg-indigo-50 p-6">
        <h3 class="text-lg font-semibold">Prefer a quick call?</h3>
        <p class="text-sm text-gray-700">Book a free consultation to discuss your use case.</p>
        <button data-modal="bookcall" class="mt-3 inline-flex items-center px-4 py-2 rounded-md bg-blue-600 text-white text-sm font-semibold hover:brightness-95">
          Book Discovery Call
        </button>
      </div>
      <div class="rounded-2xl border border-gray-200 p-6 bg-white">
        <h3 class="text-lg font-semibold">Response Times</h3>
        <p class="text-sm text-gray-700">We monitor inboxes around the clock and typically respond within a few business hours.</p>
      </div>
    </aside>
  </section>
</main>



<!-- Spacer so the sticky bar does not cover content on small screens -->
<div class="h-20 sm:hidden"></div>

<!-- Sticky Mobile Contact Bar (full-width) -->
<div id="mobile-cta-bar"
     class="fixed left-0 right-0 bottom-0 sm:hidden z-[95]">
  <nav class="w-full grid grid-cols-3 gap-2 bg-white/95 backdrop-blur
              border-t border-gray-200 p-3
              pb-[calc(12px+env(safe-area-inset-bottom))]">
    <!-- Call -->
    <a href="tel:+447479277657"
       aria-label="Call Jemima AI"
       class="flex flex-col items-center justify-center rounded-xl border border-gray-200 bg-white py-2 text-gray-900 hover:bg-gray-50">
      <i class="fa-solid fa-phone text-base"></i>
      <span class="mt-1 text-[11px] font-medium tracking-wide">Call</span>
    </a>

    <!-- SMS -->
    <a href="sms:+447479277657"
       aria-label="Send SMS to Jemima AI"
       class="flex flex-col items-center justify-center rounded-xl border border-gray-200 bg-white py-2 text-gray-900 hover:bg-gray-50">
      <i class="fa-solid fa-message text-base"></i>
      <span class="mt-1 text-[11px] font-medium tracking-wide">SMS</span>
    </a>

    <!-- Email -->
    <a href="mailto:jemima@jemima.ai?subject=Enquiry%20from%20jemima.ai"
       aria-label="Email Jemima AI"
       class="flex flex-col items-center justify-center rounded-xl border border-gray-200 bg-white py-2 text-gray-900 hover:bg-gray-50">
      <i class="fa-solid fa-envelope text-base"></i>
      <span class="mt-1 text-[11px] font-medium tracking-wide">Email</span>
    </a>
  </nav>
</div>


<!-- Footer -->
<footer id="contact" class="bg-gray-900 text-white py-16 px-6 text-center">
  <div class="max-w-3xl mx-auto">
    <h2 class="text-3xl font-bold mb-4">Ready to Get Started?</h2>
    <p class="mb-6 text-gray-300">Deliver AI ROI in just 30 days. With governance built in from the start.</p>
    <a href="#contact" data-modal="bookcall" class="inline-flex items-center px-5 py-3 rounded-md bg-white text-gray-900 font-medium hover:bg-gray-200">Book Discovery Call</a>
    <p class="text-gray-400 text-xs mt-6">&copy; <span id="y"></span> Jemima AI. All rights reserved.</p>
  </div>
</footer>

<!-- Floating Chat Launcher -->
<button id="chat-launcher"
  class="fixed bottom-5 right-5 z-[90] inline-flex items-center gap-2 rounded-full bg-blue-600 px-3 pr-4 py-2 text-white shadow-lg hover:brightness-95">
  <img src="https://jemima.ai/jemima-chat.png" alt="" class="h-7 w-7 rounded-full object-cover ring-1 ring-white/30">
  <span class="font-medium">Chat</span>
  <span class="sr-only">Open chat with Jemima</span>
</button>

<!-- Chat Popup (kept) -->
<div id="chat-popup" class="fixed inset-0 z-[100] hidden" aria-hidden="true">
  <div class="absolute inset-0 bg-black/30 md:bg-transparent" id="chat-backdrop"></div>
  <div class="absolute bottom-5 right-5 left-5 md:left-auto">
    <div role="dialog" aria-modal="true" aria-labelledby="chat-title"
         class="mx-auto md:mx-0 w-full max-w-sm rounded-2xl bg-white shadow-2xl ring-1 ring-gray-200">
      <div class="flex items-center gap-3 border-b px-4 py-3">
        <img src="https://jemima.ai/jemima-chat.png" alt="Guide avatar" class="h-8 w-8 rounded-full object-cover"/>
        <div class="min-w-0">
          <h3 id="chat-title" class="text-sm font-semibold leading-tight">Jemima</h3>
          <p class="text-xs text-gray-500">Virtual Guide</p>
        </div>
        <button type="button" id="chat-close" class="ml-auto p-2 rounded-md text-gray-500 hover:bg-gray-100" aria-label="Close chat">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
            <path d="M6 6l12 12M18 6l-12 12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          </svg>
        </button>
      </div>
      <div class="px-4 pt-4 pb-2">
        <div class="rounded-xl bg-gray-50 p-3 text-sm text-gray-700 shadow-sm">
          <p class="mb-2">Hi I am a virtual guide. I can answer questions related to Jemima services.</p>
          <p class="text-gray-600">If you want to speak to a person, book a discovery call using the button below.</p>
        </div>
        <div id="chat-body" class="mt-3 max-h-80 overflow-y-auto pr-1 hidden"></div>
      </div>
      <form id="chat-form" class="border-t px-3 py-3">
        <label class="sr-only" for="chat-input">Ask a question</label>
        <div class="flex items-center gap-2">
          <textarea id="chat-input" name="message" rows="1" placeholder="Ask a question"
                    class="w-full resize-none rounded-xl border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"></textarea>
          <button type="submit"
                  class="inline-flex h-10 w-10 items-center justify-center rounded-xl bg-blue-600 text-white hover:brightness-95"
                  aria-label="Send message">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
              <path d="M22 2L11 13" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
              <path d="M22 2L15 22l-4-9-9-4 20-7Z" stroke="currentColor" stroke-width="2" stroke-linejoin="round" fill="currentColor"/>
            </svg>
          </button>
        </div>
        <div class="mt-3">
          <div id="chat-quick-links" class="flex flex-wrap gap-2 justify-start">
            <a href="#contact" data-modal="bookcall"
               class="inline-flex items-center px-3 py-2 rounded-md bg-blue-600 text-white text-sm font-semibold hover:brightness-95">
              Book Discovery Call
            </a>
          </div>
        </div>
      </form>
      <div class="border-t px-4 py-3">
        <p class="text-[11px] leading-snug text-gray-500">
          By sending a message you agree this session may be monitored, recorded, and shared with third-party service providers for analytics and other business purposes described in our
          <a href="/privacy.html" class="underline hover:text-gray-700">Privacy policy</a>.
        </p>
      </div>
    </div>
  </div>
</div>

<!-- Tiny bubble styles -->
<style>
  #chat-body .chat-bubble{max-width:90%; margin:.375rem 0; padding:.5rem .75rem; border-radius:.75rem; font-size:.9rem; line-height:1.25rem;}
  #chat-body .ai-bubble{background:#f3f4f6; color:#111827;}
  #chat-body .user-bubble{background:#2563eb; color:#fff; margin-left:auto;}
  #chat-body.show{display:block;}
</style>

<!-- Chat behavior + Booking wiring (unchanged) -->
<script>
  const chatLauncher = document.getElementById('chat-launcher');
  const chatPopup    = document.getElementById('chat-popup');
  const chatClose    = document.getElementById('chat-close');
  const chatBackdrop = document.getElementById('chat-backdrop');
  const chatInputEl  = () => document.getElementById('chat-input');

  function openChat() {
    chatPopup.classList.remove('hidden');
    chatPopup.setAttribute('aria-hidden', 'false');
    setTimeout(() => chatInputEl()?.focus(), 0);
    document.addEventListener('keydown', escClose);
  }
  function closeChat() {
    chatPopup.classList.add('hidden');
    chatPopup.setAttribute('aria-hidden', 'true');
    document.removeEventListener('keydown', escClose);
  }
  function escClose(e){ if(e.key === 'Escape') closeChat(); }

  chatLauncher.addEventListener('click', openChat);
  chatClose.addEventListener('click', closeChat);
  chatBackdrop.addEventListener('click', closeChat);

  (function () {
    const form  = document.getElementById('chat-form');
    const input = document.getElementById('chat-input');
    const box   = document.getElementById('chat-body');

    function add (text, role = 'ai') {
      const div = document.createElement('div');
      div.className = role === 'user' ? 'chat-bubble user-bubble' : 'chat-bubble ai-bubble';
      div.innerHTML = `<p>${text}</p>`;
      box.appendChild(div);
      box.scrollTop = box.scrollHeight;
      box.classList.add('show');
    }

    function parse (raw, hdr) {
      if ((hdr.get('content-type') || '').includes('application/json')) {
        try {
          let d = JSON.parse(raw);
          if (Array.isArray(d)) d = d[0] || {};
          return (
            d.reply || d.output || d.text || d.message || d.answer || d.content ||
            (d.choices && d.choices[0]?.message?.content) || raw
          );
        } catch {}
      }
      return raw;
    }

    const webhook   = 'https://jemima-ai.app.n8n.cloud/webhook/4322b02c-7c17-479f-9ded-fcde11fa4a8d/chat';
    const sessionId = (window.crypto && crypto.randomUUID) ? crypto.randomUUID() : Date.now().toString(36);
    const pageUrl   = window.location.href;

    input.addEventListener('keydown', (e) => {
      if (e.isComposing) return;
      if (e.key === 'Enter' && !e.shiftKey) {
        e.preventDefault();
        if (input.value.trim()) form.requestSubmit();
      }
    });

    input.setAttribute('enterkeyhint', 'send');

    input.addEventListener('input', () => {
      input.style.height = 'auto';
      input.style.height = Math.min(140, input.scrollHeight) + 'px';
    });

    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      const msg = (new FormData(form).get('message') || '').toString().trim();
      if (!msg) return;
      add(msg, 'user');
      input.value = '';
      input.style.height = '40px';

      try {
        const res = await fetch(webhook, {
          method : 'POST', headers:{'Content-Type':'application/json'},
          body   : JSON.stringify({ sessionId, route:'general', action:'sendMessage', chatInput: msg, pageUrl })
        });
        const raw = await res.text();
        add(parse(raw, res.headers), 'ai');
      } catch (err) {
        console.error(err);
        add('Could not reach the server.', 'ai');
      }
    });
  })();
</script>

<!-- Booking wiring and helpers -->
<script>
  const BOOKING_URL = 'https://jemima-ai.app.n8n.cloud/webhook/unified-booking-endpoint';
  const TIME_ZONE   = 'Europe/London';

  document.addEventListener('DOMContentLoaded', () => {
    const dayInput   = document.getElementById('day');
    const slotSelect = document.getElementById('slot');
    const form       = document.getElementById('bookingForm');
    const formMsg    = document.getElementById('formMsg');
    const pageUrlIn  = document.getElementById('pageUrl');

    function flash(type, text, keepMs = 3000){
      formMsg.className = '';
      formMsg.textContent = text;
      if(type) formMsg.classList.add(type);
      formMsg.classList.add('show');
      clearTimeout(flash._timer);
      flash._timer = setTimeout(() => formMsg.classList.remove('show'), keepMs);
    }

    pageUrlIn.value = window.location.href;
    dayInput?.addEventListener('change',  fetchTimes);
    form    ?.addEventListener('submit',  submitBooking);

    async function fetchTimes(){
      const day = dayInput.value;
      if(!day){ slotSelect.innerHTML = '<option value="">Pick a day first</option>'; return; }
      slotSelect.disabled = true;
      slotSelect.innerHTML = '<option>Loading…</option>';

      try{
        const res  = await fetch(BOOKING_URL,{ method:'POST', headers:{'Content-Type':'application/json'}, body:JSON.stringify({action:'check_availability', day}) });
        const data = await res.json();
        const payload = (Array.isArray(data)?data[0]:data).data ?? data.body ?? data;
        const free   = payload.slots ?? [];

        slotSelect.innerHTML = free.length ? '<option value="">Select a time</option>' : '<option value="">No slots available</option>';
        free.forEach(s=>{ if(!s.startsWith(day)) return; const t = s.slice(11,16); slotSelect.insertAdjacentHTML('beforeend', `<option value="${s}">${t}</option>`); });
      }catch{
        slotSelect.innerHTML = '<option value="">Error loading slots</option>';
      }finally{
        slotSelect.disabled = false;
      }
    }

    async function submitBooking(e){
      e.preventDefault();
      flash('sending','Sending…',10_000);

      const payload = {
        firstName:form.firstName.value,
        lastName :form.lastName.value,
        company  :form.company.value,
        phone    :form.phone.value,
        email    :form.email.value,
        slot     :slotSelect.value,
        pageUrl  :pageUrlIn.value,
        timeZone :TIME_ZONE
      };

      try{
        const res = await fetch(BOOKING_URL,{ method:'POST', headers:{'Content-Type':'application/json'}, body:JSON.stringify({action:'create_booking',...payload}) });
        if(res.ok){
          form.reset();
          slotSelect.innerHTML = '<option value="">Pick a day first</option>';
          flash('success','Your meeting is confirmed. Check your inbox.');
        }else if(res.status===409){
          flash('error','That time has just been taken. Please choose another.');
          fetchTimes();
        }else{
          flash('error','An error occurred. Please try again later.');
        }
      }catch{
        flash('error','Could not reach the server. Try again later.');
      }
    }
  });

  document.getElementById('y').textContent = new Date().getFullYear();
</script>


<script>
  window.addEventListener('DOMContentLoaded', () => {
    const params = new URLSearchParams(window.location.search);
    if (params.get('bookcall') === 'open') {
      if (typeof window.openModal === 'function') {
        window.openModal();
      } else {
        const modal = document.getElementById('bookcall-modal');
        modal.classList.remove('hidden');
        modal.removeAttribute('inert');
        modal.setAttribute('aria-hidden', 'false');
      }
    }
  });
</script>

</body>
</html>

