<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Book a Meeting | jemima.ai</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
  <style>
    /* Reset */
    *,*::before,*::after{margin:0;padding:0;box-sizing:border-box;}
    :root{
      --primary:#1a1a2e;
      --accent:#4f46e5;
      --light:#ffffff;
      --dark:#000000;
      --gray:#4a4a4a;
      --light-gray:#f5f7fa;
      --transition:all 0.3s ease;
    }
    body{font-family:"Poppins",sans-serif;background:linear-gradient(to top right,#ffd6e7 10%,#d6eaff 90%);color:var(--dark);min-height:100vh;line-height:1.6;overflow-x:hidden;}
    .container{width:100%;max-width:1200px;margin:0 auto;padding:0 20px;}

    /* Header (copied from main site) */
    header{padding:25px 0;position:fixed;top:0;width:100%;z-index:1000;background:rgba(255,255,255,0.95);backdrop-filter:blur(10px);box-shadow:0 2px 10px rgba(0,0,0,0.05);}  
    .header-container{display:flex;justify-content:space-between;align-items:center;}
    .logo{font-size:1.8rem;font-weight:700;color:var(--dark);text-decoration:none;letter-spacing:-0.5px;}
    .logo span{color:var(--accent);}  
    nav ul{display:flex;list-style:none;}
    nav ul li{margin-left:30px;}
    nav ul li a{color:var(--dark);text-decoration:none;font-weight:500;font-size:1rem;position:relative;transition:var(--transition);}  
    nav ul li a:hover{color:var(--accent);}  
    nav ul li a::after{content:"";position:absolute;bottom:-5px;left:0;width:0;height:2px;background:var(--accent);transition:var(--transition);}  
    nav ul li a:hover::after{width:100%;}  
    .mobile-menu-btn{display:none;background:none;border:none;color:var(--dark);font-size:1.5rem;cursor:pointer;}

    /* Main wrapper */
    .booking-main{padding-top:100px;padding-bottom:80px;}

    /* Hero */
    .booking-hero{text-align:center;padding:40px 20px;max-width:900px;margin:0 auto;}
    .booking-hero h1{font-size:3rem;font-weight:800;margin-bottom:15px;letter-spacing:-1px;line-height:1.2;color:var(--dark);}  
    .booking-hero span{color:var(--accent);}  
    .booking-hero p{font-size:1.3rem;color:var(--gray);max-width:600px;margin:0 auto;line-height:1.6;font-weight:400;}

    /* Booking form section */
    .booking-section{background:#fff;border:1px solid rgba(0,0,0,0.05);border-radius:25px;box-shadow:0 25px 50px rgba(0,0,0,0.08);margin:40px auto;padding:50px;max-width:600px;}
    .booking-section h2{font-size:1.9rem;margin-bottom:25px;color:var(--dark);font-weight:700;}
    .booking-form{display:grid;gap:20px;}
    .booking-form label{font-weight:600;color:var(--dark);}  
    .booking-form input,.booking-form select{width:100%;padding:14px 18px;font-size:1rem;border:1px solid #ddd;border-radius:10px;background:var(--light-gray);}  
    .booking-form button{background:var(--accent);color:#fff;padding:16px 45px;font-size:1.1rem;font-weight:600;border:none;border-radius:12px;cursor:pointer;transition:var(--transition);}  
    .booking-form button:hover{background:var(--primary);}  

    /* Footer */
    footer{background:var(--dark);padding:40px 0;color:#fff;margin-top:80px;}
    footer p{text-align:center;font-size:0.9rem;color:#a0aec0;}

    /* Responsive */
    @media(max-width:768px){
      .booking-hero h1{font-size:2.4rem;}
      .mobile-menu-btn{display:block;margin-left:auto;}
      nav ul{display:none;flex-direction:column;position:absolute;top:80px;left:0;width:100%;background:#fff;padding:20px 0;box-shadow:0 10px 15px rgba(0,0,0,0.1);}  
      nav ul.show{display:flex;}
      nav ul li{text-align:center;margin:10px 0;}
    }
  </style>
</head>
<body>
  <!-- Header -->
  <header aria-label="Main header">
    <div class="container header-container">
      <a href="/" class="logo">jemima<span>.ai</span></a>
      <button class="mobile-menu-btn" aria-label="Toggle menu"><i class="fas fa-bars"></i></button>
      <nav aria-label="Primary">
        <ul>
          <li><a href="solutions.html">Solutions</a></li>
          <li><a href="services.html">Services</a></li>
          <li><a href="pricing.html">Pricing</a></li>
          <li><a href="contact.html">Contact</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <!-- Main -->
  <main class="booking-main" id="main">
    <div class="container">
      <!-- Hero -->
      <section class="booking-hero" aria-labelledby="hero-heading">
        <h1 id="hero-heading">Book a <span>meeting</span> with us</h1>
        <p>Select a day and a time that fits your schedule. We will e‑mail a confirmation.</p>
      </section>

      <!-- Booking form -->
      <section class="booking-section" aria-labelledby="form-heading">
        <h2 id="form-heading">Reserve your slot</h2>
        <form class="booking-form" id="bookingForm" autocomplete="off">
          <div>
            <label for="name">Your name</label>
            <input type="text" id="name" name="name" placeholder="Jane Doe" required />
          </div>
          <div>
            <label for="email">Email address</label>
            <input type="email" id="email" name="email" placeholder="you@example.com" required />
          </div>
          <div>
            <label for="day">Choose a day</label>
            <input type="date" id="day" name="day" required />
          </div>
          <div>
            <label for="slot">Choose a time</label>
            <select id="slot" name="slot" required>
              <option value="">Pick a day first</option>
            </select>
          </div>
          <button type="submit">Book now</button>
        </form>
        <p id="formMsg" style="margin-top:20px;font-weight:600;"></p>
      </section>
    </div>
  </main>

  <!-- Footer -->
  <footer aria-label="Footer">
    <div class="container">
      <p>&copy; 2025 jemima.ai. All rights reserved.</p>
    </div>
  </footer>

  <!-- Script -->
  <script>
    /* ------------ CONFIG  ------------ */
    const AVAIL_URL = 'https://jemima-ai.app.n8n.cloud/webhook/availability'; // production URL of availability webhook
    const BOOK_URL  = 'https://jemima-ai.app.n8n.cloud/webhook/book';        // production URL of booking webhook
    /* --------------------------------- */

    // Mobile menu toggle
    const mobileBtn = document.querySelector('.mobile-menu-btn');
    const navMenu  = document.querySelector('nav ul');
    mobileBtn.addEventListener('click',()=> navMenu.classList.toggle('show'));
    navMenu.querySelectorAll('a').forEach(link=> link.addEventListener('click',()=> navMenu.classList.remove('show')));

    // Elements
    const form       = document.getElementById('bookingForm');
    const formMsg    = document.getElementById('formMsg');
    const dayInput   = document.getElementById('day');
    const slotSelect = document.getElementById('slot');

    dayInput.addEventListener('change', fetchTimes);

    async function fetchTimes(){
      const day = dayInput.value;
      if(!day){return;}
      slotSelect.innerHTML = '<option>Loading…</option>';
      try{
        const res = await fetch(AVAIL_URL,{
          method:'POST',
          headers:{'Content-Type':'application/json'},
          body:JSON.stringify({day})
        });
        if(!res.ok){throw new Error('Bad response');}
        const {busy=[]} = await res.json();

        // Build every half‑hour slot between 09:00 and 17:00
        const all = [];
        for(let h=9; h<17; h++){
          for(let m of [0,30]){
            const t = `${day}T${String(h).padStart(2,'0')}:${m===0?'00':'30'}`;
            all.push(t);
          }
        }
        const free = all.filter(t=>!busy.includes(t));
        slotSelect.innerHTML = free.length ?
          '<option value="">Select a time</option>' :
          '<option value="">This day is full</option>';
        free.forEach(t=>{
          const pretty = t.slice(11,16);
          slotSelect.insertAdjacentHTML('beforeend',`<option value="${t}">${pretty}</option>`);
        });
      }catch(e){
        slotSelect.innerHTML = '<option value="">Error fetching times</option>';
        console.error('fetchTimes',e);
      }
    }

    // Booking form submission
    form.addEventListener('submit',async e=>{
      e.preventDefault();
      const data = Object.fromEntries(new FormData(form));
      formMsg.textContent = 'Sending…';
      try{
        const res = await fetch(BOOK_URL,{
          method:'POST',
          headers:{'Content-Type':'application/json'},
          body:JSON.stringify(data)
        });
        if(res.ok){
          form.reset();
          slotSelect.innerHTML = '<option value="">Pick a day first</option>';
          formMsg.textContent = 'Your meeting is confirmed. Check your inbox.';
        }else if(res.status===409){
          formMsg.textContent = 'That time has just been taken. Please choose another.';
          fetchTimes();
        }else{
          formMsg.textContent = 'An error occurred. Please try again later.';
        }
      }catch(err){
        console.error('submit',err);
        formMsg.textContent = 'Could not reach the server. Try again later.';
      }
    });
  </script>
</body>
</html>
